<!DOCTYPE html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>TCDigitalFlyer</title>
    <link href="images/logo-icon.svg" rel="icon" type="image/svg">
    <script>var pathToRoot = "";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async="async"></script>
<script type="text/javascript" src="scripts/sourceset_dependencies.js" async="async"></script>
<link href="styles/style.css" rel="Stylesheet">
<link href="styles/main.css" rel="Stylesheet">
<link href="styles/prism.css" rel="Stylesheet">
<link href="styles/logo-styles.css" rel="Stylesheet">
<link href="styles/font-jb-sans-auto.css" rel="Stylesheet">
<script type="text/javascript" src="scripts/clipboard.js" async="async"></script>
<script type="text/javascript" src="scripts/navigation-loader.js" async="async"></script>
<script type="text/javascript" src="scripts/platform-content-handler.js" async="async"></script>
<script type="text/javascript" src="scripts/main.js" defer="defer"></script>
<script type="text/javascript" src="scripts/prism.js" async="async"></script>
<script type="text/javascript" src="scripts/symbol-parameters-wrapper_deferred.js" defer="defer"></script>
</head>
<body>
    <div class="root">
<nav class="navigation" id="navigation-wrapper">
    <div class="navigation--inner">
        <div class="navigation-title">
            <button class="menu-toggle" id="menu-toggle" type="button">toggle menu</button>
            <div class="library-name">
                    <a class="library-name--link" href="index.html">
                            TCDigitalFlyer
                    </a>
            </div>
            <div class="library-version">
            </div>
        </div>
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":digitalflyer:dokkaHtml/release">androidJvm</button>
        </div>
    </div>
    <div class="navigation-controls">
        <button class="navigation-controls--btn navigation-controls--theme" id="theme-toggle-button" type="button">switch theme</button>
        <div class="navigation-controls--btn navigation-controls--search" id="searchBar" role="button">search in API</div>
    </div>
</nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="sidebar--inner" id="sideMenu"></div>
            </div>
            <div id="main">
<div class="main-content" id="content" pageIds="TCDigitalFlyer::////PointingToDeclaration//857017594">
  <div class="breadcrumbs"></div>
  <div class="cover ">
    <h1 class="cover"><span>TCDigital</span><wbr></wbr><span><span>Flyer</span></span></h1>
    <div class="platform-hinted UnderCoverText" data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":digitalflyer:dokkaHtml/release"><p class="paragraph">The Transcontinental Android SDK provides an easy way to interact with the Transcontinental Web API in order to access digital flyers. The SDK also provides pre-built UI components to allow users to browse through flyers and retrieve detailed product information.</p><h2 class=""> Getting Started</h2><p class="paragraph">The SDK can be installed using Gradle/Maven following the <code class="lang-kotlin">Instructions</code> below, followed by <code class="lang-kotlin">Using the SDK</code> for a quick summary of interacting with the SDK.</p><p class="paragraph">Upgrading from a previous version? Refer to the <code class="lang-kotlin">Migration Guide</code>.</p><h2 class=""> Minimum Requirements</h2><ul><li><p class="paragraph">Android Studio</p></li><li><p class="paragraph">Android (API level 26+)</p></li></ul><h2 class=""> Installation</h2><p class="paragraph">Using Gradle to install the SDK from a private JitPack repository:</p><h3 class=""> Overview</h3><p class="paragraph">The latest Android library resides in a private repository, accessible through Gradle/Maven. Upon registering your application with Transcontinental, you'll receive an authentication token to download the SDK.</p><h4 class=""> Authentication</h4><ul><li><p class="paragraph">Add your Jitpack authentication token to your local.properties:</p></li></ul><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">TC_JITPACK_TOKEN=my-authentication-token</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><ul><li><p class="paragraph">Add the Jitpack repository to your root <code class="lang-kotlin">build.gradle</code> (or <code class="lang-kotlin">settings.gradle</code>) at the end of the repositories:</p></li></ul><div class="sample-container"><pre><code class="block lang-groovy" theme="idea">allprojects {<br>    repositories {<br>        ...<br>        maven {<br>            url &quot;https://jitpack.io&quot;<br>            credentials { username properties.getProperty(&quot;TC_JITPACK_TOKEN&quot;) }<br>        }<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Depending on which file you've put your <code class="lang-kotlin">repositories</code> in, you may have to use different techniques to access the <code class="lang-kotlin">TC_JITPACK_TOKEN</code> property.</p><div class="sample-container"><pre><code class="block lang-groovy" theme="idea">// From the root build.gradle<br>def Properties properties = new Properties()<br>properties.load(project.rootProject.file(&quot;local.properties&quot;).newDataInputStream())<br><br>// From the settings.gradle<br>Properties properties = new Properties()<br>File propertiesFile = new File(&quot;local.properties&quot;)<br>if (propertiesFile.exists()) {<br>    properties.load(new FileInputStream(propertiesFile))<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><ul><li><p class="paragraph">Add the dependency:</p></li></ul><div class="sample-container"><pre><code class="block lang-groovy" theme="idea">dependencies {<br>    implementation 'com.github.transcontinentalSdk:sdk-android-internal:2.4.2'<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class=""> Using the SDK</h2><h3 class=""> Logging API</h3><p class="paragraph">The SDK uses the following protocol for internal logging:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">interface Logger {<br>    fun verbose(message: String)<br>    fun debug(message: String)<br>    fun info(message: String)<br>    fun warning(message: String)<br>    fun error(message: String)<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Consequently, nothing will print to the console from within the SDK until you set up a specific logger within the host application. Although the example below demonstrates a logger using <code class="lang-kotlin">Timber</code> statements, it's expected that this logger will utilize the same console, file, or cloud logging system as the host application.</p><p class="paragraph">The logger is a static object within the TCDigitalFlyer module. It's advisable to assign it before initializing the SDK, though you can do so at any time or leave it nil.</p><p class="paragraph">For production, the host application should refrain from logging debug and verbose volumes as they may contain sensitive URLs or tokens.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">import com.tctranscontinental.android.digitalflyer.DigitalFlyer.logger<br><br>logger = object : Logger {<br>    override fun verbose(message: String) {<br>        Timber.v(message)<br>    }<br><br>    override fun debug(message: String) {<br>        Timber.d(message)<br>    }<br><br>    override fun info(message: String) {<br>        Timber.i(message)<br>    }<br><br>    override fun warning(message: String) {<br>        Timber.w(message)<br>    }<br><br>    override fun error(message: String) {<br>        Timber.e(message)<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Initializing the SDK</h3><p class="paragraph">To retrieve your flyers, you will need the Transcontinental <code class="lang-kotlin">subscription key</code> for your account. This key will be provided when registering your application with Transcontinental. The SDK uses this key internally to communicate with the Web API.</p><p class="paragraph">Before using any APIs, initialize the SDK with your subscription key and client name:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">import com.tctranscontinental.android.digitalflyer.DigitalFlyer<br><br>val digitalFlyer = DigitalFlyer(<br>    subscriptionKey = subscriptionKey,<br>    client = client,<br>    banner = banner,<br>    environment = environment<br>)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><ul><li><p class="paragraph"><code class="lang-kotlin">subscriptionKey</code> - You receive this key when you register your application with Transcontinental</p></li><li><p class="paragraph"><code class="lang-kotlin">client</code> - The client’s name, as provided by Transcontinental</p></li><li><p class="paragraph"><code class="lang-kotlin">banner</code> - An optional banner, as provided by Transcontinental (defaults to the value provided to client)</p></li><li><p class="paragraph"><code class="lang-kotlin">environment</code> - The API Environment (defaults to <code class="lang-kotlin">Environment.LIVE</code>)</p></li></ul><p class="paragraph">While it’s technically possible to instantiate multiple DigitalFlyer objects with the same inputs on-demand, it’s recommended to use a single instance throughout your application (e.g. a reference in your Application class).</p><p class="paragraph">Instantiating multiple DigitalFlyer objects with different inputs is not currently supported. It will result in undefined behavior.</p><h3 class=""> Listing Available Publications</h3><p class="paragraph">The DigitalFlyer SDK provides a simple and efficient way to retrieve digital flyers using the <code class="lang-kotlin">listPublications</code> function. Upon successful retrieval, a list of <code class="lang-kotlin">Publication.Attributes</code> objects will be returned.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val publications = digitalFlyer.listPublications(<br>    storeId = storeId,<br>    language = language,<br>    date = date<br>)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><ul><li><p class="paragraph"><code class="lang-kotlin">storeId</code> - The store’s identifier</p></li><li><p class="paragraph"><code class="lang-kotlin">language</code> - The <code class="lang-kotlin">Publication</code>’s display <code class="lang-kotlin">Language</code> (an enum defaulting to <code class="lang-kotlin">Language.ENGLISH</code>)</p></li><li><p class="paragraph"><code class="lang-kotlin">date</code> - The date to search for available Publications (defaults to today)</p></li></ul><h3 class=""> Retrieving a Publication</h3><p class="paragraph">Once you have a list of <code class="lang-kotlin">Publication.Attributes</code> objects, you can retrieve a <code class="lang-kotlin">Publication</code> object using the <code class="lang-kotlin">getPublication</code> function.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val publication = digitalFlyer.getPublication(<br>    attributes = attributes, <br>    orientation = FlyerLayout.VERTICAL<br>)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><ul><li><p class="paragraph"><code class="lang-kotlin">attributes</code> - The <code class="lang-kotlin">Publication.Attributes</code> object returned from <code class="lang-kotlin">listPublications</code></p></li><li><p class="paragraph"><code class="lang-kotlin">orientation</code> - The layout version of the publication, specified via consts <code class="lang-kotlin">FlyerLayout.VERTICAL</code> and <code class="lang-kotlin">FlyerLayout.HORIZONTAL</code> (defaults to <code class="lang-kotlin">FlyerLayout.VERTICAL</code>)</p></li></ul><h3 class=""> Rendering a Publication</h3><p class="paragraph">The publication can be rendered with 2 options: Compose view or legacy XML view. </p><h4 class=""> Compose</h4><p class="paragraph">The <code class="lang-kotlin">FlyerViewUI</code> is a custom view that serves as the entry point for displaying the digital flyer in Compose. It accepts the attributes of a publication to display, along with a style extension that governs its visual behaviour.</p><p class="paragraph">The FlyerViewUI is otherwise a fully controlled component, managing it's own functionality and API calls internally.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">override fun onCreate(savedInstanceState: Bundle?) {<br>    super.onCreate(savedInstanceState)<br>//  ...    <br>    setContent {<br>        FlyerViewUI(<br>            digitalFlyer = digitalFlyer,<br>            attributes = attributes,<br>            flyerStyle = myCustomStyle,<br>        ) { event -&gt;<br>            // This will be called when an event is emitted<br>            when (event) {<br>                is Event.Sku -&gt; println(event.sku)<br>                is Event.Url -&gt; println(event.url)<br>                else -&gt; TODO(&quot;Handle other events&quot;)<br>            }<br>        }<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><ul><li><p class="paragraph"><code class="lang-kotlin">digitalFlyer</code> - The provisioned instance of the <code class="lang-kotlin">DigitalFlyer</code> to use</p></li><li><p class="paragraph"><code class="lang-kotlin">attributes</code> - The <code class="lang-kotlin">Publication.Attributes</code> object returned from <code class="lang-kotlin">listPublications</code></p></li><li><p class="paragraph"><code class="lang-kotlin">flyerStyle</code> - The style extension to apply to the FlyerViewUI controls</p></li><li><p class="paragraph"><code class="lang-kotlin">event</code> - The <code class="lang-kotlin">Event</code> object that represents an event emitted by the <code class="lang-kotlin">FlyerView</code></p></li></ul><p class="paragraph">The following events are emitted by the <code class="lang-kotlin">FlyerViewUI</code>:</p><ul><li><p class="paragraph"><code class="lang-kotlin">Event.Sku</code> - The SKU of the product whose click region was tapped</p></li><li><p class="paragraph"><code class="lang-kotlin">Event.Url</code> - The URL of the internal or external link that was tapped</p></li></ul><h4 class=""> XML</h4><p class="paragraph">For the legacy XML variant, add <code class="lang-kotlin">&lt;FlyerView&gt;</code> to your layout file:</p><div class="sample-container"><pre><code class="block lang-xml" theme="idea">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;<br>&lt;!-- activity_flyer_view.xml --&gt;<br>&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<br>    android:layout_width=&quot;match_parent&quot;<br>    android:layout_height=&quot;match_parent&quot;&gt;<br>    <br>    &lt;com.tctranscontinental.android.digitalflyer.ui.xml.FlyerView<br>        android:id=&quot;@+id/flyer_view&quot;<br>        android:layout_width=&quot;match_parent&quot;<br>        android:layout_height=&quot;match_parent&quot; /&gt;<br><br>&lt;/FrameLayout&gt;</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">or use it as a root element for your activity/fragment:</p><div class="sample-container"><pre><code class="block lang-xml" theme="idea">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;<br>&lt;!-- activity_flyer_view.xml --&gt;<br>&lt;com.tctranscontinental.android.digitalflyer.ui.xml.FlyerView<br>    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<br>    android:id=&quot;@+id/flyer_view&quot;<br>    android:layout_width=&quot;match_parent&quot;<br>    android:layout_height=&quot;match_parent&quot; /&gt;</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">and pass a publication to it via <code class="lang-kotlin">FlyerView.setActivePublication()</code>:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">import com.tctranscontinental.android.digitalflyer.ui.xml.FlyerView<br><br>override fun onCreate(savedInstanceState: Bundle?) {<br>    super.onCreate(savedInstanceState)<br>//  ...    <br>    val flyerView: FlyerView = findViewById(R.id.flyer_view)<br>    flyerView.setActivePublication(publication) { event -&gt;<br>        when (event) {<br>            is Event.Sku -&gt; println(&quot;SKU: ${event.sku}&quot;) // This will be called when an event is emitted<br>            else -&gt; TODO(&quot;Handle other events&quot;)<br>        }<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Alternatively, everything can be added dynamically via code (skipping xml):</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">import com.tctranscontinental.android.digitalflyer.ui.xml.FlyerView<br><br>override fun onCreate(savedInstanceState: Bundle?) {<br>    super.onCreate(savedInstanceState)<br>//  ...    <br>    val flyerView = FlyerView(this)<br>    setContentView(flyerView)<br>    <br>    flyerView.setActivePublication(publication) { event -&gt;<br>        when (event) {<br>            is Event.Sku -&gt; println(&quot;SKU: ${event.sku}&quot;) // This will be called when an event is emitted<br>            else -&gt; TODO(&quot;Handle other events&quot;)<br>        }<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Error Handling</h3><p class="paragraph">Error handling in the DigitalFlyer SDK is represented through the <code class="lang-kotlin">DFError</code> enum, which covers various cases including unauthorized access, missing subscription key, or missing resources.</p><p class="paragraph">Here are the possible error scenarios:</p><ul><li><p class="paragraph"><code class="lang-kotlin">UNAUTHORIZED</code>: Represents an unauthorized request, usually due to an invalid subscription key.</p></li><li><p class="paragraph"><code class="lang-kotlin">NOT_FOUND</code>: The requested resource was not found on the server. This could happen if the resource was deleted, or if the resource was not correctly specified.</p></li><li><p class="paragraph"><code class="lang-kotlin">PUBLICATION_NOT_FOUND</code>: Indicates a failed request due to an unavailable publication.</p></li><li><p class="paragraph"><code class="lang-kotlin">MISSING_SUBSCRIPTION_KEY</code>: This error occurs when the subscriptionKey is not provided during DigitalFlyer initialization.</p></li><li><p class="paragraph"><code class="lang-kotlin">MISSING_CLIENT</code>: Occurs when the client parameter is missing during DigitalFlyer initialization.</p></li><li><p class="paragraph"><code class="lang-kotlin">MISSING_BANNER</code>: This error indicates that the banner parameter is missing during DigitalFlyer initialization.</p></li><li><p class="paragraph"><code class="lang-kotlin">INVALID</code>: A generic error case for any other unidentified issue.</p></li></ul><h3 class=""> Styling the Controls</h3><p class="paragraph">The default <code class="lang-kotlin">FlyerStyle</code> is minimal and uses native styling where possible. As a result, users of the <code class="lang-kotlin">FlyerViewUI</code> will want to create a custom style and apply that as a view modifier to the <code class="lang-kotlin">FlyerViewUI</code>.</p><p class="paragraph">A simple customization is shown below, where only the Masthead's logo is configured.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// Uses a locally available logo in the masthead (recommended)<br>private val myCustomStyle = FlyerStyle(masthead = MastheadStyle(logo = R.drawable.my_logo))<br><br>// Uses the default TC logo in the masthead<br>private val myCustomStyle = FlyerStyle(masthead = MastheadStyle())<br><br>// Attempts to use the logo available via the API <br>// Not recommended, as it incurs a network request on each flyer viewing<br>private val myCustomStyle = FlyerStyle(masthead = MastheadStyle(logo = null))</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Refer to <a href="-t-c-digital-flyer/com.tctranscontinental.android.digitalflyer.ui/-flyer-style/index.html">com.tctranscontinental.android.digitalflyer.ui.FlyerStyle</a> for details on available modifiers.</p><p class="paragraph">Note: As the <code class="lang-kotlin">FlyerStyle</code> does not represent core rendering functionality, breaking changes to the style parameters will not result in a major SDK version update.</p><h2 class=""> Migration Guide</h2><p class="paragraph">Transition existing apps from v1.x to v2.x</p><h3 class=""> Overview</h3><p class="paragraph">The v2.0.0 update introduces substantial performance improvements for the SDK, driven by several optimizations and technical enhancements:</p><ul><li><p class="paragraph">Reduced time to first image when opening a flyer with the new rendering engine by re-writing manifest parsing</p></li><li><p class="paragraph">Reduced total memory usage by 5-10x by eagerly caching to disk and evicting off-screen images from memory</p></li><li><p class="paragraph">Improved scrolling responsiveness by moving most/all download/parsing/rendering-related actions to worker threads. This results in less &quot;janky&quot; scrolling when viewing very large flyers</p></li><li><p class="paragraph">Reduced bandwidth requirements by enabling HTTP Range Requests to allow partial downloads, instead of re-downloads</p></li><li><p class="paragraph">Reduced likelihood of temporarily blank screens by dynamically changing download/rendering priorities to prefer what should be currently on-screen, and deferring all off-screen images</p></li></ul><p class="paragraph">These updates will facilitate some upcoming performance enhancements, namely pre-fetching. Pre-fetching will allow the SDK to optionally download and cache images before they are needed, resulting in a much smoother user experience and an even lower time to first image.</p><p class="paragraph">These improvements are the result of a significant re-write of the SDK's rendering engine, and as such, we are releasing this as a breaking version change.</p><h3 class=""> Initializing the SDK</h3><p class="paragraph">In v1.x, the SDK was initialized via a singleton and using two methods. In v2.x, interaction with the SDK occurs through an instance of <code class="lang-kotlin">DigitalFlyer</code>, and it's up to the consumer to manage the lifecycle of this object however fits their workflow.</p><p class="paragraph">Refer to <code class="lang-kotlin">DigitalFlyer</code> and <code class="lang-kotlin">Using the SDK</code> for more information.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// v1.x<br>TCDigitalFlyer(context).initialize(&quot;MY_SUBSCRIPTION_KEY&quot;)<br>TCSdkModel.setSdkParams(<br>    &quot;myBanner&quot;,<br>    &quot;myClient&quot;,<br>    &quot;staging&quot;,<br>    &quot;myStoreId&quot;,<br>    &quot;en&quot;,<br>    Date()<br>)<br><br>// v2.x<br>val digitalFlyer = DigitalFlyer(<br>    subscriptionKey = subscriptionKey,<br>    client = client,<br>    banner = banner,<br>    environment = environment<br>)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Listing Available Publications</h3><p class="paragraph">In v1.x, available Publications were retrieved via the <code class="lang-kotlin">getFlyerListingData</code> using static SDK parameters and helper methods. In lieu of this, v2.x provides a <code class="lang-kotlin">listPublications</code> method on the <code class="lang-kotlin">DigitalFlyer</code> object, which returns a list of <code class="lang-kotlin">Publication.Attributes</code> objects. Refer to <code class="lang-kotlin">Using the SDK</code> for details.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// v1.x<br>TCSdkModel.setStoreId(&quot;myStoreId&quot;)<br>TCSdkModel.setLanguage(&quot;en&quot;)<br>TCSdkModel.setStoreIdAndLanguage(&quot;myStoreId&quot;, &quot;en&quot;)<br><br>val listener = object : TCSdkListener {<br>    override fun onLandingResponse(landingDataResponse: LandingDataResponse) {<br>        // landingDataResponse.flyers of type List&lt;LandingData&gt;<br>    }<br><br>    override fun onError(errorType: ErrorStatus, error: String) {<br>        when (errorType) {<br>            ErrorStatus.ERR_NO_INTERNET_CONNECTION -&gt; TODO()<br>            ErrorStatus.ERR_UNAUTHORIZED -&gt; TODO()<br>            ErrorStatus.ERR_API_CALL_FAIL -&gt; TODO()<br>            ErrorStatus.ERR_NO_DATA_FOUND -&gt; TODO()<br>            ErrorStatus.ERR_PARAM_VALIDATION -&gt; TODO()<br>            ErrorStatus.ERR_LOADER -&gt; TODO()<br>        }<br>    }<br>}<br>TCDigitalFlyer(context).getFlyerListingData(TCSdkModel, listener)<br><br>// v2.x<br>val publications = digitalFlyer.listPublications(<br>    storeId = storeId,<br>    language = language,<br>    date = date<br>)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Retrieving and Rendering a Publication </h3><p class="paragraph">The v1.x SDK did not have an explicit method for retrieving a Publication. Instead, the <code class="lang-kotlin">TCDigitalFlyer(context).gotoFlyerDetailPage</code> created a view for the passed in listener and <code class="lang-kotlin">landingData</code>. The publication would be downloaded and rendered in one step (with a lot of boilerplate).</p><p class="paragraph">In lieu of this, v2.x provides an explicit <code class="lang-kotlin">getPublication</code> method on the <code class="lang-kotlin">DigitalFlyer</code> object, which returns a <code class="lang-kotlin">Publication</code> object. This object is passed downstream to the <code class="lang-kotlin">FlyerView</code> renderer. Refer to <code class="lang-kotlin">Using the SDK</code> for more details.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// v1.x<br>val productListener = object : TCSdkDetailListener {<br>    override fun onProductClicked(sku: String) {<br>        // The SKU of the clicked product<br>    }<br><br>    override fun onError(<br>        errorType: ErrorStatus,<br>        error: String<br>    ) {<br>        when (errorType) {<br>            ErrorStatus.ERR_NO_INTERNET_CONNECTION -&gt; TODO()<br>            ErrorStatus.ERR_UNAUTHORIZED -&gt; TODO()<br>            ErrorStatus.ERR_API_CALL_FAIL -&gt; TODO()<br>            ErrorStatus.ERR_NO_DATA_FOUND -&gt; TODO()<br>            ErrorStatus.ERR_PARAM_VALIDATION -&gt; TODO()<br>            ErrorStatus.ERR_LOADER -&gt; TODO()<br>        }<br>    }<br>}<br><br>val uiComponents = TCSdkUIComponents()<br>uiComponents.apiLoaderColor = &quot;#6200EE&quot;<br>uiComponents.orientation = Orientation.VERTICAL<br><br>val flyerView = TCDigitalFlyer(context).gotoFlyerDetailPage(<br>    productListener,<br>    uiComponents,<br>    landingData<br>)<br><br>// v2.x<br>val publication = digitalFlyer.getPublication(<br>    attributes = attributes, <br>    orientation = FlyerLayout.VERTICAL<br>)<br><br>// The publication can be rendered with 2 options: Compose view<br>...<br>    FlyerView(publication) { event -&gt;<br>        when (event) {<br>            is Event.Sku -&gt; println(&quot;SKU: ${event.sku}&quot;) // This will be called when an event is emitted<br>            else -&gt; TODO(&quot;Handle other events&quot;)<br>        }<br>    }<br>...<br><br>// or, legacy XML view<br>...<br>    val flyerView: FlyerView = findViewById(R.id.flyer_view)<br>    flyerView.setActivePublication(publication) { event -&gt;<br>        when (event) {<br>            is Event.Sku -&gt; println(&quot;SKU: ${event.sku}&quot;) // This will be called when an event is emitted<br>            else -&gt; TODO(&quot;Handle other events&quot;)<br>        }<br>    }<br>...</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
  <h2 class="">Packages</h2>
  <div class="table"><a data-name="1891100836%2FPackages%2F857017594" anchor-label="com.tctranscontinental.android.digitalflyer" id="1891100836%2FPackages%2F857017594" data-filterable-set=":digitalflyer:dokkaHtml/release"></a>
    <div class="table-row" data-filterable-current=":digitalflyer:dokkaHtml/release" data-filterable-set=":digitalflyer:dokkaHtml/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="-t-c-digital-flyer/com.tctranscontinental.android.digitalflyer/index.html">com.tctranscontinental.android.digitalflyer</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1891100836%2FPackages%2F857017594"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="1710122658%2FPackages%2F857017594" anchor-label="com.tctranscontinental.android.digitalflyer.ui" id="1710122658%2FPackages%2F857017594" data-filterable-set=":digitalflyer:dokkaHtml/release"></a>
    <div class="table-row" data-filterable-current=":digitalflyer:dokkaHtml/release" data-filterable-set=":digitalflyer:dokkaHtml/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="-t-c-digital-flyer/com.tctranscontinental.android.digitalflyer.ui/index.html">com.tctranscontinental.android.digitalflyer.ui</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1710122658%2FPackages%2F857017594"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="286911805%2FPackages%2F857017594" anchor-label="com.tctranscontinental.android.digitalflyer.ui.theme" id="286911805%2FPackages%2F857017594" data-filterable-set=":digitalflyer:dokkaHtml/release"></a>
    <div class="table-row" data-filterable-current=":digitalflyer:dokkaHtml/release" data-filterable-set=":digitalflyer:dokkaHtml/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="-t-c-digital-flyer/com.tctranscontinental.android.digitalflyer.ui.theme/index.html">com.tctranscontinental.android.digitalflyer.ui.theme</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="286911805%2FPackages%2F857017594"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="377400971%2FPackages%2F857017594" anchor-label="com.tctranscontinental.android.digitalflyer.ui.xml" id="377400971%2FPackages%2F857017594" data-filterable-set=":digitalflyer:dokkaHtml/release"></a>
    <div class="table-row" data-filterable-current=":digitalflyer:dokkaHtml/release" data-filterable-set=":digitalflyer:dokkaHtml/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="-t-c-digital-flyer/com.tctranscontinental.android.digitalflyer.ui.xml/index.html">com.tctranscontinental.android.digitalflyer.ui.xml</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="377400971%2FPackages%2F857017594"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
  </div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2025 Copyright</span><span
                class="pull-right"><span>Generated by </span><a
                href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
            </div>
        </div>
    </div>
</body>
</html>
